<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="801px" preserveAspectRatio="none" style="width:1116px;height:801px;" version="1.1" viewBox="0 0 1116 801" width="1116px" zoomAndPan="magnify"><defs><filter height="300%" id="f1waazyjsysikk" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="222.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="54.5" y="98.2969"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="579.9219" style="stroke:#A80036;stroke-width:1.0;" width="10" x="192.5" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="559.7891" style="stroke:#A80036;stroke-width:1.0;" width="10" x="469.5" y="148.5625"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="291.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="761.5" y="262.2266"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="761.5" y="611.9531"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="116.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1057.5" y="553.6875"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="59" x2="59" y1="88.2969" y2="717.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="197.5" x2="197.5" y1="88.2969" y2="717.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="474" x2="474" y1="88.2969" y2="717.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="766.5" x2="766.5" y1="88.2969" y2="717.3516"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1062.5" x2="1062.5" y1="88.2969" y2="717.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="5" y="84.9951">资源所有者-用户</text><ellipse cx="59.5" cy="15" fill="#FEFECE" filter="url(#f1waazyjsysikk)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M59.5,23 L59.5,50 M46.5,31 L72.5,31 M59.5,50 L46.5,65 M59.5,50 L72.5,65 " fill="none" filter="url(#f1waazyjsysikk)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="5" y="729.3467">资源所有者-用户</text><ellipse cx="59.5" cy="742.6484" fill="#FEFECE" filter="url(#f1waazyjsysikk)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M59.5,750.6484 L59.5,777.6484 M46.5,758.6484 L72.5,758.6484 M59.5,777.6484 L46.5,792.6484 M59.5,777.6484 L72.5,792.6484 " fill="none" filter="url(#f1waazyjsysikk)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1waazyjsysikk)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="56" x="167.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="174.5" y="72.9951">浏览器</text><rect fill="#FEFECE" filter="url(#f1waazyjsysikk)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="56" x="167.5" y="716.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="174.5" y="736.3467">浏览器</text><rect fill="#FEFECE" filter="url(#f1waazyjsysikk)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="73" x="436" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="443" y="72.9951">Web应用</text><rect fill="#FEFECE" filter="url(#f1waazyjsysikk)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="73" x="436" y="716.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="59" x="443" y="736.3467">Web应用</text><rect fill="#FFA500" filter="url(#f1waazyjsysikk)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="84" x="722.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="729.5" y="72.9951">认证服务器</text><rect fill="#FFA500" filter="url(#f1waazyjsysikk)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="84" x="722.5" y="716.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="729.5" y="736.3467">认证服务器</text><rect fill="#FEFECE" filter="url(#f1waazyjsysikk)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="84" x="1018.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1025.5" y="72.9951">资源服务器</text><rect fill="#FEFECE" filter="url(#f1waazyjsysikk)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="84" x="1018.5" y="716.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="1025.5" y="736.3467">资源服务器</text><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="222.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="54.5" y="98.2969"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="579.9219" style="stroke:#A80036;stroke-width:1.0;" width="10" x="192.5" y="119.4297"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="559.7891" style="stroke:#A80036;stroke-width:1.0;" width="10" x="469.5" y="148.5625"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="291.4609" style="stroke:#A80036;stroke-width:1.0;" width="10" x="761.5" y="262.2266"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="29.1328" style="stroke:#A80036;stroke-width:1.0;" width="10" x="761.5" y="611.9531"/><rect fill="#FFFFFF" filter="url(#f1waazyjsysikk)" height="116.5313" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1057.5" y="553.6875"/><polygon fill="#A80036" points="180.5,115.4297,190.5,119.4297,180.5,123.4297,184.5,119.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="64.5" x2="186.5" y1="119.4297" y2="119.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="71.5" y="114.3638">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="84.5" y="114.3638">发起访问</text><polygon fill="#A80036" points="457.5,144.5625,467.5,148.5625,457.5,152.5625,461.5,148.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="202.5" x2="463.5" y1="148.5625" y2="148.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="209.5" y="143.4966">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="45" x="222.5" y="143.4966">api调用</text><path d="M484,161.5625 L484,231.5625 L804,231.5625 L804,171.5625 L794,161.5625 L484,161.5625 " fill="#FBFB77" filter="url(#f1waazyjsysikk)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M794,161.5625 L794,171.5625 L804,171.5625 L794,161.5625 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="490" y="178.6294">这就是OIDC中的Authentication Request</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="490" y="193.7622">发送到Authorization Endpoint</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="490" y="208.895">其中Authentication Request可以指定多个参数</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="490" y="224.0278">包括redirect_uri、state、scope、response type</text><polygon fill="#A80036" points="749.5,258.2266,759.5,262.2266,749.5,266.2266,753.5,262.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="479.5" x2="755.5" y1="262.2266" y2="262.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="486.5" y="257.1606">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="499.5" y="257.1606">请求登录or授权</text><polygon fill="#A80036" points="213.5,287.3594,203.5,291.3594,213.5,295.3594,209.5,291.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="207.5" x2="760.5" y1="291.3594" y2="291.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="219.5" y="286.2935">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="232.5" y="286.2935">302重定向到认证页面</text><polygon fill="#A80036" points="180.5,316.4922,190.5,320.4922,180.5,324.4922,184.5,320.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="59.5" x2="186.5" y1="320.4922" y2="320.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="66.5" y="315.4263">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="79.5" y="315.4263">认证身份并授权</text><polygon fill="#A80036" points="749.5,345.625,759.5,349.625,749.5,353.625,753.5,349.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202.5" x2="755.5" y1="349.625" y2="349.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="209.5" y="344.5591">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="222.5" y="344.5591">认证身份并授权</text><polygon fill="#A80036" points="213.5,374.7578,203.5,378.7578,213.5,382.7578,209.5,378.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="207.5" x2="760.5" y1="378.7578" y2="378.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="219.5" y="373.6919">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="232.5" y="373.6919">返回Authorization code</text><polygon fill="#A80036" points="457.5,403.8906,467.5,407.8906,457.5,411.8906,461.5,407.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="202.5" x2="463.5" y1="407.8906" y2="407.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="209.5" y="402.8247">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="222.5" y="402.8247">请求验证api，提供Authorization code</text><polygon fill="#A80036" points="749.5,448.1563,759.5,452.1563,749.5,456.1563,753.5,452.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="479.5" x2="755.5" y1="452.1563" y2="452.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="486.5" y="439.5239">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245" x="499.5" y="431.9575">发送Authorization Code + client secret</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="499.5" y="447.0903">到/token endpoint</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="771.5" x2="813.5" y1="511.5547" y2="511.5547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="813.5" x2="813.5" y1="511.5547" y2="524.5547"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="772.5" x2="813.5" y1="524.5547" y2="524.5547"/><polygon fill="#A80036" points="782.5,520.5547,772.5,524.5547,782.5,528.5547,778.5,524.5547" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="778.5" y="491.356">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="800.5" y="476.2231">验证code和secret，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="800.5" y="491.356">根据Reponse type生成</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="804.5" y="506.4888">access token、id token、refresh token</text><polygon fill="#A80036" points="490.5,549.6875,480.5,553.6875,490.5,557.6875,486.5,553.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="484.5" x2="765.5" y1="553.6875" y2="553.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="496.5" y="548.6216">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="518.5" y="548.6216">返回access token等token</text><polygon fill="#A80036" points="1045.5,578.8203,1055.5,582.8203,1045.5,586.8203,1049.5,582.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="479.5" x2="1051.5" y1="582.8203" y2="582.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="486.5" y="577.7544">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="162" x="508.5" y="577.7544">基于access token发起访问</text><polygon fill="#A80036" points="782.5,607.9531,772.5,611.9531,782.5,615.9531,778.5,611.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="776.5" x2="1056.5" y1="611.9531" y2="611.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="788.5" y="606.8872">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="810.5" y="606.8872">鉴权access token</text><polygon fill="#A80036" points="1045.5,637.0859,1055.5,641.0859,1045.5,645.0859,1049.5,641.0859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="766.5" x2="1051.5" y1="641.0859" y2="641.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="773.5" y="636.02">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="795.5" y="636.02">鉴权通过</text><polygon fill="#A80036" points="490.5,666.2188,480.5,670.2188,490.5,674.2188,486.5,670.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="484.5" x2="1061.5" y1="670.2188" y2="670.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="496.5" y="665.1528">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="518.5" y="665.1528">返回请求结果</text><polygon fill="#A80036" points="208.5,695.3516,198.5,699.3516,208.5,703.3516,204.5,699.3516" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="202.5" x2="468.5" y1="699.3516" y2="699.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18" x="214.5" y="694.2856">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52" x="236.5" y="694.2856">展示结果</text></g></svg>